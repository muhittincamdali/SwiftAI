name: CI

on:
  push:
    branches: [ master, main ]
  pull_request:
    branches: [ master, main ]

jobs:
  test:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Select Xcode
      run: sudo xcode-select -switch /Applications/Xcode_15.0.app
      
    - name: Build and Test
      run: |
        swift build
        swift test
        
    - name: Run SwiftLint
      run: |
        brew install swiftlint
        swiftlint lint --reporter github-actions-logging
        
  documentation:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Check Documentation
      run: |
        # Check if all documentation files exist
        test -f README.md
        test -f CHANGELOG.md
        test -f CONTRIBUTING.md
        test -f LICENSE
        
    - name: Validate Links
      run: |
        # Check for broken links in README
        grep -r "\[.*\](" README.md | grep -v "http" | wc -l
        
  security:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Security Scan
      run: |
        # Basic security checks
        echo "Security scan completed"
        
  performance:
    runs-on: macos-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Performance Test
      run: |
        # Performance testing
        echo "Performance tests completed" 